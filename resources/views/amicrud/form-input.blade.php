<script>
    let deletedItems=[],token=$('meta[name="csrf-token"]').attr("content");function dissableForm(t,i,s=!1){t.find("input, textarea, select").each(function(){var t=$(this).attr("name"),e=$(this).attr("type"),n=$(this).attr("data-ignore");"_token"===t||"_method"===t||null!=n||(s&&$(this).val(""),$(this).prop("disabled",i)),"checkbox"!==e&&"radio"!==e||$(this).prop("disabled",i)})}function EditItem(t,i){$.ajax({type:"GET",url:t,timeout:6e4,datatype:"json",cache:!1,beforeSend:function(t){$(i).html('<i class="fa fa-spinner fa-spin" style="font-size:24px"></i>')},error:function(t,e,n){$(i).html("")},success:function(t){$(i).html(""),$(i).html(t);const e=$(i).find("form");dissableForm(e,!0),e.find(".new_btn").hide(),e.find(".cancel_btn").show(),e.find(".edit_btn").prop("disabled",!1),e.find(".save_btn").prop("disabled",!0),$(i).find(".dropify").each(function(){$(this).dropify()}),$(i).find(".summernote").each(function(){$(this).summernote("disable")})}})}function ListItems(t,i){$.ajax({type:"GET",url:t,timeout:6e4,datatype:"json",cache:!1,beforeSend:function(t){$(i).html('<i class="fa fa-spinner fa-spin" style="font-size:24px"></i>')},error:function(t,e,n){$(i).html("")},success:function(t){$(i).html(""),$(i).html(t)}})}function DeleteItem(t,e){confirm("This is an irrevisable action that will delete "+t.toUpperCase()+" Are you sure you want to delete "+t.toUpperCase())&&$.ajax({type:"DELETE",url:e,data:{_token:token},timeout:6e4,datatype:"json",cache:!1,error:function(t,e,n){btn.prop("disabled",!1),$(".spin-loader").fadeOut();var i=xhr.responseJSON.errors,i=Object.values(i)[0];$(".process-response").html("").html(i,"error")},success:function(t){$(".success-response").html("").html(t.message),t.list_target&&t.list_target_url&&ListItems(t.list_target_url,t.list_target),setTimeout(function(){$(".success-response").html("")},5e3),t.Reload&&setTimeout(function(){window.location.reload()},2e3)}})}function SaveItem(){let t=$(this).closest("form");var e=new FormData(t[0]),n=t.attr("action"),i=t.attr("method");$.ajax({type:i,url:n,data:e,cache:!1,contentType:!1,processData:!1,error:function(t,e,n){btn.prop("disabled",!1),$(".spin-loader").fadeOut();t=t.responseJSON.errors,t=Object.values(t)[0];$(".process-response").html("").html(t,"error")},success:function(t){$(".process-response").html("").html(t.message),t.Reload&&setTimeout(function(){window.location.reload()},2e3)}})}$(function(){"use strict";$("form.amicrud input, form.amicrud textarea, form.amicrud select, form.amicrud.delete_btn, form.amicrud.save_btn, form.amicrud.edit_btn, form.amicrud.cancel_btn").prop("disabled",!0),$('form.amicrud input[name="_token"], form.amicrud input[name="_method"], form.amicrud input[type="search"], form.amicrud .ignore, form.amicrud input[name="_token"]').prop("disabled",!1),$("#search_form input, form.amicrud input#id").prop("disabled",!1)}),$("#mini-search").on("keyup",function(){var t=$(this).val().toLowerCase();$("#mini-datatable tbody tr").filter(function(){$(this).toggle(-1<$(this).text().toLowerCase().indexOf(t))})}),$(document).ready(function(){$(document).on("click",".cancel_btn",function(t){let e=$(this).closest("form");e.find("input, textarea, select, .delete_btn, .save_btn").each(function(){$(this).prop("disabled",!0)}),$('#search_form input, input[type="search"], input[class="show-inactive"], form input[name="_token"]').prop("disabled",!1),e.find(".new_btn").show(),e.find(".edit_btn").show(),e.find(".new_btn").prop("disabled",!1),e.find(".edit_btn").prop("disabled",!1),e.find(".summernote").each(function(){$(this).summernote("disable")}),$(this).hide()}),$(document).on("click",".new_btn",function(t){let e=$(this).closest("form");e.find(".delete_btn").prop("disabled",!0),e.find(".cancel_btn").show(),e.find(".edit_btn").hide(),e.find(".cancel_btn, .save_btn").each(function(){$(this).prop("disabled",!1)}),dissableForm(e,!1,!0),$('#search_form input, input[type="search"]').prop("disabled",!1),$(this).hide()}),$(document).on("click",".edit_btn",function(t){let e=$(this).closest("form");e.find(".save_btn").each(function(){$(this).prop("disabled",!1)}),e.find(".new_btn").hide(),e.find(".cancel_btn").show(),e.find(".cancel_btn").prop("disabled",!1),$(this).hide(),dissableForm(e,!1)}),$(document).on("click",".edit-details",function(){EditItem($(this).attr("data-url"),$(this).attr("data-target"))}),$(document).on("click",".delete-details",function(){var t=$(this).attr("data-url");DeleteItem($(this).attr("data-name"),t)}),$(document).on("click",".save_btn",function(t){t.preventDefault();const i=$(this);i.prop("disabled",!0);let e=i.closest("form");var n=new FormData(e[0]),s=e.attr("action"),t=e.attr("method");confirm("Are you sure you want to save this record?")&&(i.append('<span class="spin-loader"> <i class="fa fa-spinner fa-spin"></i> please wait...</span>'),$.ajax({type:t,url:s,data:n,cache:!1,contentType:!1,processData:!1,error:function(t,e,n){i.prop("disabled",!1),$(".spin-loader").fadeOut();t=t.responseJSON.errors,t=Object.values(t)[0];$(".process-response").html("").html("<code>"+t+"</code>"),setTimeout(function(){$(".process-response").html("")},3e3)},success:function(t){i.prop("disabled",!1),$(".spin-loader").fadeOut(),$(".process-response").html("").html(t.message),t.list_target&&t.list_target_url&&ListItems(t.list_target_url,t.list_target),t.reload&&setTimeout(function(){window.location.reload()},2e3)}}))})});
</script>